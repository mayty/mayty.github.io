<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//RU">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1251">
<META HTTP-EQUIV="Content-Language" CONTENT="ru">

<title>Лекция</title>
<style type="text/css">
 body {font-family: Arial, sans-serif;}
 .c {font-family: "Courier New", Courier, monospace}
</style>

</HEAD><BODY>

<div align="justify">

<p>&nbsp;</p>
<div align="center">
<p><strong>КАЧЕСТВО ОБСЛУЖИВАНИЯ В КОМПЬЮТЕРНЫХ СЕТЯХ</strong></p>
</div>
<p>&nbsp;</p>

<p>Для многих приложений в КС критически важна производительность СПД. Этот факт стал предпосылкой для возникновения <em>качества обслуживания</em> -- QoS (Quality of Service), то есть комплекса аппаратных и программных технологий для управления пропускной способностью СПД.</p>

<p>С точки зрения приложения, из-за СПД могут возникать четыре основные проблемы:<br>
1.&nbsp;Недостаточная полоса пропускания.<br>
2.&nbsp;Недопустимые задержки при пересылке пакетов.<br>
3.&nbsp;Разброс задержек при пересылке пакетов.<br>
4.&nbsp;Потеря пакетов.</p>

<p>Способы повышения производительности СПД (альтернативные QoS):<br>
1.&nbsp;Количественное расширение СПД.<br>
2.&nbsp;Переход на качественно новые технологии.<br>
3.&nbsp;Сжатие пакетов или заголовков пакетов.</p>

<p>Причины задержек в СПД:<br>
1.&nbsp;Обработка пакетов активным сетевым оборудованием.<br>
2.&nbsp;Формирование пакетов и инкапсуляция.<br>
3.&nbsp;Буферизация.<br>
4.&nbsp;Распространение сигналов по СрПД.</p>

<p>Причины потери пакетов в СПД:<br>
1.&nbsp;Перегрузка процессоров.<br>
2.&nbsp;Переполнение очередей.<br>
3.&nbsp;Нарушение целостности пакетов.</p>

<p>Две фундаментальные задачи QoS:<br>
1.&nbsp;Классификация трафика (QoS Classes).<br>
2.&nbsp;Обеспечение требующихся характеристик выделенных классов (QoS Policies).</p>

<p>С точки зрения реализации, выделяются три базовых модели QoS:<br>
1.&nbsp;<em>Наилучшая возможная</em> (Best Effort).<br>
2.&nbsp;<em>Интегральная</em> (Integrated Services) (RFC&nbsp;1633).<br>
3.&nbsp;<em>Дифференциальная</em> (Differentiated Services) (RFC&nbsp;2475).</p>

<p>При наилучшем возможном обслуживании делается все возможное для доставки пакета, но при этом ничего не гарантируется, то есть фактически QoS к пакетам не применяется.</p>

<p>При интегральном обслуживании приложения информируют СПД о том, что им нужны особые условия. Первостепенным рабочим компонентом является протокол RSVP (Resource ReserVation Protocol) (RFC&nbsp;2205).</p>

<p>При дифференциальном обслуживании СПД сама дифференцирует трафик и применяет к нему ту либо иную политику. Первостепенный принцип заключается в том, что для обеспечения возможности дифференцирования пакеты требуется метить.</p>

<p>Подход Best Effort типичен при пересылке электронных данных (HTTP и так далее) и применяется по умолчанию ко всем видам трафика. Подходы Integrated Services и Differentiated Services типичны при пересылке голоса и видео по СПД с поддержкой разнородного трафика, причем первый из них «жестче» в смысле выполнения требований. Возможно сочетание подходов.</p>

<p>Основные механизмы, необходимые для реализации QoS:</p>

<p>1.&nbsp;Классификация (сlassification) -- анализ пакета и включение его в тот либо иной класс. Критериями могут выступать: адрес источника, адрес назначения, метка и другое.</p>

<p>2.&nbsp;Маркировка (marking, coloring) -- внесение в пакет (pre-marking) либо замена (re-marking) соответствующей метки (на определенном уровне) для обеспечения правильности распознавания пакета, как принадлежащего определенному классу в оставшейся части СПД.</p>

<p>3.&nbsp;Работа с очередями (queuing, scheduling, congestion management) -- исходя из метки либо других полей, постановка пакета в ту либо иную входную либо выходную очередь сетевого интерфейса по определенному алгоритму. Ключевые алгоритмы:<br>
--&nbsp;FIFO;<br>
--&nbsp;PQ (Priority Queuing);<br>
--&nbsp;CQ (Custom Queuing);<br>
--&nbsp;WFQ (Weighted Fair Queuing);<br>
--&nbsp;CBWFQ (Class-Based WFQ);<br>
--&nbsp;LLQ (Low-Latency Queuing).</p>

<p>4.&nbsp;Избегание затора (congestion avoidance) -- при переполнении очереди, удаление пакетов по определенному случайному алгоритму. Ключевые алгоритмы:<br>
--&nbsp;RED (Random Early Detection);<br>
--&nbsp;WRED (Weighted RED).</p>

<p>5.&nbsp;Применение политики (policing) -- контроль соблюдения соответствующих классу характеристик.</p>

<p>6.&nbsp;Формирование трафика (shaping) -- сдерживание трафика определенного класса на выходном интерфейсе в установленных рамках.</p>

<p>7.&nbsp;Оптимизация (link efficiency) -- повышение эффективности использования имеющегося канала за счет определенных ухищрений, например сжатия или LFI (Link Fragmentation and Interleaving).</p>

<p>8.&nbsp;Управление (signaling) -- запрашивание распределения ресурсов для определенного класса трафика. Ключевой протокол -- RSVP.</p>

<p>9.&nbsp;Измерение (metering) -- временный анализ трафика определенного класса с целью определения его характеристик.</p>

<p>Таким образом, фактически любое QoS в конечном счете сводится к определенной дисциплине обслуживания очередей пакетов для обеспечения требующихся характеристик трафика.</p>

<p>Практические примеры QoS:</p>

<p>1.&nbsp;Комплексное поле FLOWSPEC в RSVP-запросе. Имеет два основных формата согласно двум вариантам RSVP: Guaranteed-rate и Controlled-load.</p>

<p>2.&nbsp;Шестибитное поле DSCP (Differentiated Services Code Point) в заголовке IP-пакета (RFC&nbsp;2474 плюс RFC&nbsp;3260). Долго и сложно развивалось, недостаточно четко стандартизировано, разные интерпретации в реализациях. Первый предварительный этап можно обобщить как поле ToS (Type of Service) (RFC&nbsp;791 -- IPv4, три бита; плюс RFC&nbsp;1349 -- уже 4 бита), второй -- как поле IP Precedence (RFC&nbsp;1812). Согласно последним стандартам RFC, все сводится к описанию так называемого PHB (Per-Hop Behavior) (RFC&nbsp;3140) и выделяются четыре основных типа: Default PHB (RFC&nbsp;2474) -- DSCP = 000000b, Assured Forwarding PHB (RFC&nbsp;2597) -- четыре класса с тремя уровнями DSCP в каждом, Expedited Forwarding PHB (RFC&nbsp;3246) -- DSCP вычисляется по формуле, Class Selector PHB (RFC&nbsp;2474) -- DSCP вычисляется исходя из совместимости с предыдущими стандартами и имеет более точную градацию в сравнении с ними.</p>

<p>3.&nbsp;Трехбитное поле priority (CoS) в теге 802.1Q: BK -- BackGround, BE -- Best Efforts, EE -- Excelent Efforts, CL -- Controlled Load, VI -- VIdeo, VO -- VOice, NC – Network Control.</p>

<p>4.&nbsp;Классы сервиса ATM: CBR -- Constant Bit Rate Service, VBR-rt -- Variable Bit Rate real time, VBR-nrt -- Variable Bit Rate non-real time, ABR -- Available Bit Rate, UBR -- Unspecified Bit Rate плюс GFR -- Guaranteed Frame Rate.</p>

<p>Типичный пример инкапсуляции с задействованием QoS: VoIP -> RTP (Real-time Transport Protocol) -> UDP -> IP (DSCP = EFh) -> 802.1Q (CoS = 5).</p>

<p>Более подробное изучение алгоритмов QoS выходит за рамки базового курса.</p>

</div>

</BODY>
</HTML>
